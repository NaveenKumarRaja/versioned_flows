{
  "pluginType": "DB",
  "pluginId": "postgres-plugin",
  "unpublishedAction": {
    "name": "get_user_data",
    "datasource": {
      "name": "QA_theoceanleads_sms",
      "pluginId": "postgres-plugin",
      "messages": [],
      "isAutoGenerated": false,
      "id": "QA_theoceanleads_sms",
      "deleted": false,
      "policies": [],
      "userPermissions": []
    },
    "pageId": "Page1",
    "actionConfiguration": {
      "timeoutInMillisecond": 10000,
      "paginationType": "NONE",
      "encodeParamsToggle": true,
      "body": "SELECT \n    mh.lead_id,\n    MAX(mh.created_date) AS recent_timestamp, \n    CONCAT(pd.owner1_firstname, ' ', pd.owner1_lastname) AS owner_name,\n    COUNT(*) - SUM(CASE WHEN mh.is_read THEN 1 ELSE 0 END) AS unread_count,\n    l.lead_status\nFROM \n    theoceanleads_sms.message_history mh\nJOIN \n    pinellas_county.property_details pd ON mh.lead_id = pd.parcel_number\nJOIN\n    theoceanleads_sms.lead l ON mh.lead_id = l.lead_id\nWHERE \n    mh.campaign_id = (\n        SELECT campaign_id \n        FROM theoceanleads_sms.campaign \n        WHERE campaign_name = '{{Campaign_Dropdown.selectedOptionValue}}'\n    )\n    AND l.lead_status NOT IN ('Unqualified', 'Optout', 'Wrong Number')\nGROUP BY \n    mh.lead_id, \n    pd.owner1_firstname, \n    pd.owner1_lastname,\n    l.lead_status\nHAVING \n    COUNT(CASE WHEN mh.message_type = 'Incoming' THEN 1 END) > 0 AND\n    COUNT(CASE WHEN mh.message_type = 'Incoming' AND mh.is_sms_optout = false THEN 1 END) = COUNT(CASE WHEN mh.message_type = 'Incoming' THEN 1 END)\nORDER BY \n    recent_timestamp DESC;",
      "selfReferencingDataPaths": [],
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ]
    },
    "executeOnLoad": true,
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "isValid": true,
    "invalids": [],
    "messages": [],
    "jsonPathKeys": [
      "Campaign_Dropdown.selectedOptionValue"
    ],
    "userSetOnLoad": false,
    "confirmBeforeExecute": false,
    "policies": [],
    "userPermissions": [],
    "createdAt": "2024-02-06T11:14:52Z"
  },
  "id": "Page1_get_user_data",
  "deleted": false,
  "gitSyncId": "65c4cad89ff92234089a3a96_65c4cad99ff92234089a3a9f"
}